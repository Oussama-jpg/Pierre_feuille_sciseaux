!(function () {
  const buttons = document.querySelectorAll(".pick"),
    scoreElement = document.getElementById("score"),
    main = document.getElementById("main"),
    selection = document.getElementById("selection"),
    reset = document.getElementById("reset"),
    choices = ["paper", "rock", "scissors"],
    user_select = document.getElementById("user_select"),
    computer_select = document.getElementById("computer_select"),
    winner = document.getElementById("winner");
  let score = 0,
    userChoice = void 0;
  function checkWinner() {
    const computerChoice = pickRandomChoice(),
      winningCombination = {
        paper: "rock",
        rock: "scissors",
        scissors: "paper",
      };
    console.log(userChoice, computerChoice, winningCombination[userChoice]),
      updateSelection(user_select, userChoice),
      updateSelection(computer_select, computerChoice),
      userChoice === computerChoice
        ? (winner.innerText = "Draw")
        : winningCombination[userChoice] === computerChoice
        ? ((winner.innerText = "you win"), updateScore(1))
        : ((winner.innerText = "you loose"), updateScore(-1)),
      (main.style.display = "none"),
      (selection.style.display = "flex");
  }
  function updateScore(value) {
    (score += value), (scoreElement.innerText = score);
  }
  function pickRandomChoice() {
    return choices[Math.floor(Math.random() * choices.length)];
  }
  function updateSelection(selectionEL, choice) {
    selectionEL.classList.remove("btn-paper", "btn-rock", "btn-scissors");
    const img = selectionEL.querySelector("img");
    selectionEL.classList.add(`btn-${choice}`),
      (img.src = `./images/icon-${choice}.svg`),
      (img.alt = choice);
  }
  buttons.forEach((button) => {
    button.addEventListener("click", () => {
      (userChoice = button.getAttribute("data-choice")), checkWinner();
    });
  }),
    reset.addEventListener("click", () => {
      (main.style.display = "flex"), (selection.style.display = "none");
    });
})();
